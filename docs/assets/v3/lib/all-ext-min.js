!function(e){"use strict";e.fn.generateId=function(t){var n=1;return t=t?e.trim(t.toLowerCase().replace(/[^a-z0-9_]+/g," ")).replace(/\s+/g,"-"):"id",this.each(function(){var e;if(!this.getAttribute("id")){for(e=t;document.getElementById(e);)e=t+String(n),n++;this.setAttribute("id",e)}})}}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;n<a;n+=1)o[n]=str(n,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(i=rep[n],(r=str(i,l))&&o.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l))&&o.push(quote(i)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){i(e)}},void 0!==n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,i=e.setTimeout||i,r=e.clearTimeout||r,a=e.setInterval||a,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex();return e===t},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=i,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t,i,r,s,l="",c=Boolean(o.getHash());return o.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),r="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(i.contentWindow.document);return t!==l?(l=t,n!==t&&(r=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==r&&(r=n,c&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==l&&(l=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(a(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,i=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(i),a=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(a=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(a)?(o.busy(!1),!1):(o.getHashByState(a),(n=o.discardedState(a))?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(a.data,a.title,encodeURI(a.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),c=o.getHashByState(l),u=o.getHash(),d=o.expectedStateId==a.id;return o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),s===c?(o.busy(!1),!1):(o.saveState(a),d||o.Adapter.trigger(e,"statechange"),o.isHashEqual(s,u)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),c=o.getHashByState(l),u=o.getStateByIndex(-2);return o.discardState(l,a,u),s===c?(o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),o.saveState(a),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(a.data,a.title,a.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}(window),function(e,t){"use strict";var n=e.console||void 0,i=e.document,r=e.navigator,a=!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,c=e.clearInterval,u=e.JSON,d=e.alert,h=e.History=e.History||{},p=e.history;try{a=e.sessionStorage,a.setItem("TEST","1"),a.removeItem("TEST")}catch(e){a=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return void 0!==h.Adapter&&(void 0!==h.initCore&&h.initCore(),void 0!==h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(t){if(void 0!==h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var e,t,r,a,o,s=!(void 0===n||void 0===n.log||void 0===n.log.apply),l=i.getElementById("log");for(s?(a=Array.prototype.slice.call(arguments),e=a.shift(),void 0!==n.debug?n.debug.apply(n,[e,a]):n.log.apply(n,[e,a])):e="\n"+arguments[0]+"\n",t=1,r=arguments.length;t<r;++t){if("object"==typeof(o=arguments[t])&&void 0!==u)try{o=u.stringify(o)}catch(e){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(e),!0},h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached=void 0!==h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},h.isInternetExplorer=function(){return h.isInternetExplorer.cached=void 0!==h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},h.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},h.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){var e=h.getState(!1,!1),t=(e||{}).url||h.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),void 0!==h.stateToId[t])n=h.stateToId[t];else if(void 0!==h.store.stateToId[t])n=h.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0===h.idToState[n]&&void 0===h.store.idToState[n])break;h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||void 0},h.getStateString=function(e){var t,n;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},u.stringify(n)},h.getStateId=function(e){var t;return t=h.normalizeState(e),t.id},h.getHashByState=function(e){var t;return t=h.normalizeState(e),t.hash},h.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,t=/(.*)\&_suid=([0-9]+)$/.exec(n),t?t[1]||e:e,(t?String(t[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var n,i,r=null;return t=t||!1,n=h.extractId(e),n&&(r=h.getStateById(n)),r||(i=h.getFullUrl(e),n=h.getIdByUrl(i)||!1,n&&(r=h.getStateById(n)),r||!t||h.isTraditionalAnchor(e)||(r=h.createStateObject(null,null,i))),r},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||void 0},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||void 0},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||void 0},h.hasUrlDuplicate=function(e){var t;return t=h.extractState(e.url),t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t,n,i,r=!1;return h.savedStates.length&&(t=e.id,n=h.getLastSavedState(),i=n.id,r=t===i),r},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,r;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(r=h.getPageUrl(),h.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0))&&t.url===e.url&&(n=t.title||h.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return i.title=n,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:void 0===h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);var t=function(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)n=h.queues[e],0!==n.length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,n=h.extractState(h.getLocationHref());if(!h.isLastSavedState(n))return t=n,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var f=function(){};h.pushState=h.pushState||f,h.replaceState=h.replaceState||f}else h.onPopState=function(t,n){var i,r,a=!1,o=!1;return h.doubleCheckComplete(),(i=h.getHash())?(r=h.extractState(i||h.getLocationHref(),!0),r?h.replaceState(r.data,r.title,r.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(a=h.Adapter.extractEventData("state",t,n)||!1,o=a?h.getStateById(a):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()),o||(o=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(o)?(h.busy(!1),!1):(h.storeState(o),h.saveState(o),h.setTitle(o),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(t,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,p.pushState(a.id,a.title,a.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(t,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,p.replaceState(a.id,a.title,a.url),h.Adapter.trigger(e,"popstate")),!0};if(a){try{h.store=u.parse(a.getItem("History.store"))||{}}catch(e){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),a&&(h.onUnload=function(){var e,t,n;try{e=u.parse(a.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=u.stringify(e);try{a.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;a.length&&(a.removeItem("History.store"),a.setItem("History.store",n))}},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},h.options&&h.options.delayInit||h.init()}(window);var ResizeEvents={eventElement:document,initialised:!1,timeoutID:null,currentWindowWidth:null,currentWindowHeight:null,heartbeatThrottleCount:0,watchedElements:[],throttleStates:{},conf:{windowResizeEvent:"x-window-resize",windowWidthResizeEvent:"x-window-width-resize",windowHeightResizeEvent:"x-window-height-resize",elementWidthResizeEvent:"x-width-change",elementHeightResizeEvent:"x-height-change",initialResizeEvent:"x-initial-sizes",watcherClass:"resize-events-watcher",framesPerHeartbeat:6}};!function(e,t){"use strict";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),ResizeEvents.bind=function(t,n){e(function(){!0!==ResizeEvents.initialised&&ResizeEvents.initialise()}),e(ResizeEvents.eventElement).bind(t,n)},ResizeEvents.initialise=function(){if(!0!==ResizeEvents.initialised){var t=e(window).width(),n=e(window).height();ResizeEvents.currentWindowWidth=t,ResizeEvents.currentWindowHeight=n,e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.initialResizeEvent,[t,n]),ResizeEvents.initialised=!0,e(window).resize(ResizeEvents.handleWindowResize)}},e.fn.registerWatcher=function(t,n){var i=-1!==t.indexOf("width"),r=-1!==t.indexOf("height");void 0===n&&(e(this).wrapInner('<div class="'+ResizeEvents.conf.watcherClass+'"></div>'),n="."+ResizeEvents.conf.watcherClass),e(this).each(function(){e(this).data("resizeEvents",{watchWidth:i,previousWidth:null,watchHeight:r,previousHeight:null,innerElementSelector:n})}),ResizeEvents.watchedElements[ResizeEvents.watchedElements.length]=e(this),1===ResizeEvents.watchedElements.length&&ResizeEvents.heartbeat()},ResizeEvents.heartbeat=function(){if(ResizeEvents.heartbeatThrottleCount++%ResizeEvents.conf.framesPerHeartbeat!=0)return void window.requestAnimFrame(ResizeEvents.heartbeat);var t,n=null,i=null,r=function(){var t=e(this),r=t.data("resizeEvents"),a=t.find(r.innerElementSelector).eq(0);r.watchWidth&&(n=a.width())!==r.previousWidth&&(t.trigger(ResizeEvents.conf.elementWidthResizeEvent,[n]),r.previousWidth=n),r.watchHeight&&(i=a.height())!==r.previousHeight&&(t.trigger(ResizeEvents.conf.elementHeightResizeEvent,[i]),r.previousHeight=i),t.data("resizeEvents",r)};for(t=0;t<ResizeEvents.watchedElements.length;t++)ResizeEvents.watchedElements[t].each(r);window.requestAnimFrame(ResizeEvents.heartbeat)},ResizeEvents.handleWindowResize=function(){t.oldIE&&t.oldIEversion<7&&ResizeEvents.throttle(ResizeEvents.handleWindowResize,200)||ResizeEvents.broadcastWindowResize()},ResizeEvents.broadcastWindowResize=function(){ResizeEvents.timeoutID=null;var t=e(window).width(),n=e(window).height(),i=!1;ResizeEvents.currentWindowWidth!==t&&(e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowWidthResizeEvent,[t,n]),e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowResizeEvent,[t,n]),ResizeEvents.currentWindowWidth=t,i=!0),ResizeEvents.currentWindowHeight!==n&&(e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowHeightResizeEvent,[t,n]),i||e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowResizeEvent,[t,n]),ResizeEvents.currentWindowHeight=n)},ResizeEvents.throttle=function(e,t){var n=e.toString().match(/ResizeEvents\.throttle\s*\(\s*([^,\s]+)/)[1];return!0===ResizeEvents.throttleStates[n]?(ResizeEvents.throttleStates[n]=null,!1):(null!==ResizeEvents.throttleStates[n]&&window.clearTimeout(ResizeEvents.throttleStates[n]),ResizeEvents.throttleStates[n]=window.setTimeout(function(){ResizeEvents.releaseThrottle(n,e)},t),!0)},ResizeEvents.releaseThrottle=function(e,t){ResizeEvents.throttleStates[e]=!0,t.apply()}}(jQuery,qg),function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function i(e){for(var t=0,n=-1;-1!==(n=e.indexOf("\n",n+1));)t++;return t}function r(e,t){function n(e){this.len_after=e,this.name="close_"+t}var i=e+"_state",r="strong"==e?"em_state":"strong_state";return function(a,o){if(this[i][0]==t)return this[i].shift(),[a.length,new n(a.length-t.length)];var s=this[r].slice(),l=this[i].slice();this[i].unshift(t);var c=this.processInline(a.substr(t.length)),u=c[c.length-1];return this[i].shift(),u instanceof n?(c.pop(),[a.length-u.len_after,[e].concat(c)]):(this[r]=s,this[i]=l,[t.length,t])}}function o(e){for(var t=e.split(""),n=[""],i=!1;t.length;){var r=t.shift();switch(r){case" ":i?n[n.length-1]+=r:n.push("");break;case"'":case'"':i=!i;break;case"\\":r=t.shift();default:n[n.length-1]+=r}}return n}function s(e){return b(e)&&e.length>1&&"object"==typeof e[1]&&!b(e[1])?e[1]:void 0}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e){if("string"==typeof e)return l(e);var t=e.shift(),n={},i=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(n=e.shift());e.length;)i.push(c(e.shift()));var r="";for(var a in n)r+=" "+a+'="'+l(n[a])+'"';return"img"==t||"br"==t||"hr"==t?"<"+t+r+"/>":"<"+t+r+">"+i.join("")+"</"+t+">"}function u(e,t,n){var i;n=n||{};var r=e.slice(0);"function"==typeof n.preprocessTreeNode&&(r=n.preprocessTreeNode(r,t));var a=s(r);if(a){r[1]={};for(i in a)r[1][i]=a[i];a=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",a&&delete a.references;break;case"code_block":r[0]="pre",i=a?2:1;var o=["code"];o.push.apply(o,r.splice(i,r.length-i)),r[i]=o;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":if(r[0]="a",!(l=t[a.ref]))return a.original;delete a.ref,a.href=l.href,l.title&&(a.title=l.title),delete a.original;break;case"img_ref":r[0]="img";var l=t[a.ref];if(!l)return a.original;delete a.ref,a.src=l.href,l.title&&(a.title=l.title),delete a.original}if(i=1,a){for(var c in r[1]){i=2;break}1===i&&r.splice(i,1)}for(;i<r.length;++i)r[i]=u(r[i],t,n);return r}function d(e){for(var t=s(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(d(e[t]),++t)}var h=e.Markdown=function(e){switch(typeof e){case"undefined":this.dialect=h.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in h.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=h.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};e.parse=function(e,t){return new h(t).toTree(e)},e.toHTML=function(t,n,i){var r=e.toHTMLTree(t,n,i);return e.renderJsonML(r)},e.toHTMLTree=function(e,t,n){"string"==typeof e&&(e=this.parse(e,t));var i=s(e),r={};i&&i.references&&(r=i.references);var a=u(e,r,n);return d(a),a};var f=h.mk_block=function(e,i,r){1==arguments.length&&(i="\n\n");var a=new String(e);return a.trailing=i,a.inspect=n,a.toSource=t,void 0!=r&&(a.lineNumber=r),a};h.prototype.split_blocks=function(e,t){e=e.replace(/(\r\n|\n|\r)/g,"\n");var n,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,a=[],o=1;for(null!=(n=/^(\s*\n)/.exec(e))&&(o+=i(n[0]),r.lastIndex=n[0].length);null!==(n=r.exec(e));)"\n#"==n[2]&&(n[2]="\n",r.lastIndex--),a.push(f(n[1],n[2],o)),o+=i(n[0]);return a},h.prototype.processBlock=function(e,t){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,e,t);for(var r=0;r<i.length;r++){var a=n[i[r]].call(this,e,t);if(a)return(!b(a)||a.length>0&&!b(a[0]))&&this.debug(i[r],"didn't return a proper array"),a}return[]},h.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},h.prototype.toTree=function(e,t){var n=e instanceof Array?e:this.split_blocks(e),i=this.tree;try{for(this.tree=t||this.tree||["markdown"];n.length;){var r=this.processBlock(n.shift(),n);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{t&&(this.tree=i)}},h.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,e)},h.prototype.loop_re_over_block=function(e,t,n){for(var i,r=t.valueOf();r.length&&null!=(i=e.exec(r));)r=r.substr(i[0].length),n.call(this,i);return r},h.dialects={},h.dialects.Gruber={block:{atxHeader:function(e,t){var n=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(n){var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[i]}},setextHeader:function(e,t){var n=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(n){var i=["header",{level:"="===n[2]?1:2},n[1]];return n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[i]}},code:function(e,t){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(i)){e:for(;;){var r=this.loop_re_over_block(i,e.valueOf(),function(e){n.push(e[1])});if(r.length){t.unshift(f(r,e.trailing));break e}if(!t.length)break e;if(!t[0].match(i))break e
;n.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(e,t){var n=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(n){var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&t.unshift(f(n[3])),i}},lists:function(){function e(e){return new RegExp("(?:^("+l+"{0,"+e+"} {0,3})("+a+")\\s+)|(^"+l+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function n(e,t,n,i){if(t)e.push(["para"].concat(n));else{var r=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;i&&e.length>1&&n.unshift(i);for(var a=0;a<n.length;a++){var o=n[a];"string"==typeof o&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=o:r.push(o)}}}function i(e,t){for(var n=new RegExp("^("+l+"{"+e+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+e+"}","gm"),r=[];t.length>0&&n.exec(t[0]);){var a=t.shift(),o=a.replace(i,"");r.push(f(o,a.trailing,a.lineNumber))}return r}function r(e,t,n){var i=e.list,r=i[i.length-1];if(!(r[1]instanceof Array&&"para"==r[1][0]))if(t+1==n.length)r.push(["para"].concat(r.splice(1,r.length-1)));else{var a=r.pop();r.push(["para"].concat(r.splice(1,r.length-1)),a)}}var a="[*+-]|\\d+\\.",o=/[*+-]/,s=new RegExp("^( {0,3})("+a+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(a,l){function c(e){var t=o.exec(e[2])?["bulletlist"]:["numberlist"];return p.push({list:t,indent:e[1]}),t}var u=a.match(s);if(u){for(var d,h,p=[],f=c(u),b=!1,v=[p[0].list];;){for(var w=a.split(/(?=\n)/),y="",m=0;m<w.length;m++){var S="",x=w[m].replace(/^\n/,function(e){return S=e,""}),k=e(p.length);if(void 0!==(u=x.match(k))[1]){y.length&&(n(d,b,this.processInline(y),S),b=!1,y=""),u[1]=t(u[1]);var E=Math.floor(u[1].length/4)+1;if(E>p.length)f=c(u),d.push(f),d=f[1]=["listitem"];else{var j=!1;for(h=0;h<p.length;h++)if(p[h].indent==u[1]){f=p[h].list,p.splice(h+1,p.length-(h+1)),j=!0;break}j||(++E<=p.length?(p.splice(E,p.length-E),f=p[E-1].list):(f=c(u),d.push(f))),d=["listitem"],f.push(d)}S=""}x.length>u[0].length&&(y+=S+x.substr(u[0].length))}y.length&&(n(d,b,this.processInline(y),S),b=!1,y="");var I=i(p.length,l);I.length>0&&(g(p,r,this),d.push.apply(d,this.toTree(I,[])));var H=l[0]&&l[0].valueOf()||"";if(!H.match(s)&&!H.match(/^ /))break;a=l.shift();var z=this.dialect.block.horizRule(a,l);if(z){v.push.apply(v,z);break}g(p,r,this),b=!0}return v}}}(),blockquote:function(e,t){if(e.match(/^>/m)){var n=[];if(">"!=e[0]){for(var i=e.split(/\n/),r=[],a=e.lineNumber;i.length&&">"!=i[0][0];)r.push(i.shift()),a++;var o=f(r.join("\n"),"\n",e.lineNumber);n.push.apply(n,this.processBlock(o,[])),e=f(i.join("\n"),e.trailing,a)}for(;t.length&&">"==t[0][0];){var l=t.shift();e=f(e+e.trailing+l,l.trailing,e.lineNumber)}var c=e.replace(/^> ?/gm,""),u=(this.tree,this.toTree(c,["blockquote"])),d=s(u);return d&&d.references&&(delete d.references,v(d)&&u.splice(1,1)),n.push(u),n}},referenceDefn:function(e,t){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(e.match(n)){s(this.tree)||this.tree.splice(1,0,{});var i=s(this.tree);void 0===i.references&&(i.references={});var r=this.loop_re_over_block(n,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=i.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])});return r.length&&t.unshift(f(r,e.trailing)),[]}},para:function(e,t){return[["para"].concat(this.processInline(e))]}}},h.dialects.Gruber.inline={__oneElement__:function(e,t,n){var i;if(t=t||this.dialect.inline.__patterns__,!(i=new RegExp("([\\s\\S]*?)("+(t.source||t)+")").exec(e)))return[e.length,e];if(i[1])return[i[1].length,i[1]];var r;return i[2]in this.dialect.inline&&(r=this.dialect.inline[i[2]].call(this,e.substr(i.index),i,n||[])),r=r||[i[2].length,i[2]]},__call__:function(e,t){function n(e){"string"==typeof e&&"string"==typeof r[r.length-1]?r[r.length-1]+=e:r.push(e)}for(var i,r=[];e.length>0;)i=this.dialect.inline.__oneElement__.call(this,e,t,r),e=e.substr(i.shift()),g(i,n);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var n={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(n.title=t[4]),[t[0].length,["img",n]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,"!["]},"[":function(e){var t=String(e),n=h.DialectHelpers.inline_until_char.call(this,e.substr(1),"]");if(!n)return[1,"["];var i,r,a=1+n[0],o=n[1],s=(e=e.substr(a)).match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(s){var l=s[1];if(a+=s[0].length,l&&"<"==l[0]&&">"==l[l.length-1]&&(l=l.substring(1,l.length-1)),!s[3])for(var c=1,u=0;u<l.length;u++)switch(l[u]){case"(":c++;break;case")":0==--c&&(a-=l.length-u,l=l.substring(0,u))}return l=this.dialect.inline.__call__.call(this,l,/\\/)[0],r={href:l||""},void 0!==s[3]&&(r.title=s[3]),i=["link",r].concat(o),[a,i]}return s=e.match(/^\s*\[(.*?)\]/),s?(a+=s[0].length,r={ref:(s[1]||String(o)).toLowerCase(),original:t.substr(0,a)},i=["link_ref",r].concat(o),[a,i]):1==o.length&&"string"==typeof o[0]?(r={ref:o[0].toLowerCase(),original:t.substr(0,a)},i=["link_ref",r,o[0]],[a,i]):[1,"["]},"<":function(e){var t;return null!=(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"==t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(e){return[3,["linebreak"]]}},h.dialects.Gruber.inline["**"]=r("strong","**"),h.dialects.Gruber.inline.__=r("strong","__"),h.dialects.Gruber.inline["*"]=r("em","*"),h.dialects.Gruber.inline._=r("em","_"),h.buildBlockOrder=function(e){var t=[];for(var n in e)"__order__"!=n&&"__call__"!=n&&t.push(n);e.__order__=t},h.buildInlinePatterns=function(e){var t=[];for(var n in e)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1==n.length?i:"(?:"+i+")")}t=t.join("|"),e.__patterns__=t;var r=e.__call__;e.__call__=function(e,n){return void 0!=n?r.call(this,e,n):r.call(this,e,t)}},h.DialectHelpers={},h.DialectHelpers.inline_until_char=function(e,t){for(var n=0,i=[];;){if(e.charAt(n)==t)return n++,[n,i];if(n>=e.length)return null;var r=this.dialect.inline.__oneElement__.call(this,e.substr(n));n+=r[0],i.push.apply(i,r.slice(1))}},h.subclassDialect=function(e){function t(){}function n(){}return t.prototype=e.block,n.prototype=e.inline,{block:new t,inline:new n}},h.buildBlockOrder(h.dialects.Gruber.block),h.buildInlinePatterns(h.dialects.Gruber.inline),h.dialects.Maruku=h.subclassDialect(h.dialects.Gruber),h.dialects.Maruku.processMetaHash=function(e){for(var t=o(e),n={},i=0;i<t.length;++i)if(/^#/.test(t[i]))n.id=t[i].substring(1);else if(/^\./.test(t[i]))n.class?n.class=n.class+t[i].replace(/./," "):n.class=t[i].substring(1);else if(/\=/.test(t[i])){var r=t[i].split(/\=/);n[r[0]]=r[1]}return n},h.dialects.Maruku.block.document_meta=function(e,t){if(!(e.lineNumber>1)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){s(this.tree)||this.tree.splice(1,0,{});var n=e.split(/\n/);for(p in n){var i=n[p].match(/(\w+):\s*(.*)$/),r=i[1].toLowerCase(),a=i[2];this.tree[1][r]=a}return[]}},h.dialects.Maruku.block.block_meta=function(e,t){var n=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(n){var i,r=this.dialect.processMetaHash(n[2]);if(""===n[1]){var o=this.tree[this.tree.length-1];if(i=s(o),"string"==typeof o)return;i||(i={},o.splice(1,0,i));for(a in r)i[a]=r[a];return[]}var l=e.replace(/\n.*$/,""),c=this.processBlock(l,[]);(i=s(c[0]))||(i={},c[0].splice(1,0,i));for(a in r)i[a]=r[a];return c}},h.dialects.Maruku.block.definition_list=function(e,t){var n,i,r=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,a=["dl"];if(i=e.match(r)){for(var o=[e];t.length&&r.exec(t[0]);)o.push(t.shift());for(var s=0;s<o.length;++s){var l=(i=o[s].match(r))[1].replace(/\n$/,"").split(/\n/),c=i[2].split(/\n:\s+/);for(n=0;n<l.length;++n)a.push(["dt",l[n]]);for(n=0;n<c.length;++n)a.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[a]}},h.dialects.Maruku.block.table=function(e,t){var n,i,r=function(e,t){(t=t||"\\s").match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var n,i=[],r=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");n=e.match(r);)i.push(n[1]),e=n[2];return i.push(e),i},a=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,o=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(i=e.match(a))i[3]=i[3].replace(/^\s*\|/gm,"");else if(!(i=e.match(o)))return;var s=["table",["thead",["tr"]],["tbody"]];i[2]=i[2].replace(/\|\s*$/,"").split("|");var l=[];for(g(i[2],function(e){e.match(/^\s*-+:\s*$/)?l.push({align:"right"}):e.match(/^\s*:-+\s*$/)?l.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?l.push({align:"center"}):l.push({})}),i[1]=r(i[1].replace(/\|\s*$/,""),"|"),n=0;n<i[1].length;n++)s[1][1].push(["th",l[n]||{}].concat(this.processInline(i[1][n].trim())));return g(i[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var t=["tr"];for(e=r(e,"|"),n=0;n<e.length;n++)t.push(["td",l[n]||{}].concat(this.processInline(e[n].trim())));s[2].push(t)},this),[s]},h.dialects.Maruku.inline["{:"]=function(e,t,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var r=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!r)return[2,"{:"];var a=this.dialect.processMetaHash(r[1]),o=s(i);o||(o={},i.splice(1,0,o));for(var l in a)o[l]=a[l];return[r[0].length,""]},h.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,h.buildBlockOrder(h.dialects.Maruku.block),h.buildInlinePatterns(h.dialects.Maruku.inline);var g,b=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};g=Array.prototype.forEach?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var i=0;i<e.length;i++)t.call(n||e,e[i],i,e)};var v=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};e.renderJsonML=function(e,t){(t=t||{}).root=t.root||!1;var n=[];if(t.root)n.push(c(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)n.push(c(e.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),jQuery.butterfly={},jQuery.butterfly.defaultOptions={contentDefaultWidth:null,contentDefaultHeight:"100%",mediaMaxWidth:"100%",mediaMaxHeight:"100%",treatAsMedia:!1,lightBoxMargin:null,animateResize:!0,animationSpeed:150,useIframe:"autodetect",collapseHeightWhenPossible:!0,reuseFragment:!1,closeButton:!0,closeButtonImage:"/assets/v3/lib/ext/butterfly/close.png",closeButtonCorner:"tr",clickOverlayCloses:!0,preloadLoadingImage:"",preloadGalleryControlsSprite:"",galleryControlWidth:49,galleryControlHeight:85,galleryMode:"rel",galleryContainers:"",galleryLoops:!1,captionMode:"title",preloadNextGalleryImage:!0,zoomFromClicked:!1,callbackPreOpen:null,callbackPreResize:null,callbackPostResize:null,callbackPostOpen:null,callbackPreClose:null,callbackPostClose:null,treatAsImage:!1},jQuery.butterfly.conf={overlayOpacity:".7",lightboxClass:"lightbox",lightboxLinkSelector:"a.lightbox"},jQuery.butterfly.linkCount=0,DOM_VK_END=35,DOM_VK_HOME=36,DOM_VK_LEFT=37,DOM_VK_UP=38,DOM_VK_RIGHT=39,DOM_VK_DOWN=40,DOM_VK_ESCAPE=27,function(e,t){"use strict";function n(e){return e=e||window.event,e.keyCode?e.keyCode:e.which?e.which:null}var i,r,a,o,s,l,c,u,d,h,p,f,g;e.fn.accessibleText=function(){return this.is("img")?this.attr("alt"):this.is("input")?this.attr("value"):e.map(this.contents(),function(t){if(3===t.nodeType)return t.data;if(1===t.nodeType){var n=e(t);return n.is("img, input")||n.find("img[alt], input[value]").length>0?n.accessibleText():n.text()}}).join("")},e(function(){void 0!==t&&e(this).each(function(){t.bind("x-text-resize x-window-resize",i)}),e.fn.centre=function(){return this.css({position:"fixed",top:(e(window).height()-this.outerHeight())/2+"px",left:(e(window).width()-this.outerWidth())/2+"px"})},e(document.body).append('<div id="jb-overlay"></div><div id="jb-window"><div id="jb-window-inner"><div id="jb-window-content" style="width: auto; height: auto;" tabindex="0"></div></div></div>').bind("keydown",l),e("#jb-overlay").fadeTo(0,e.butterfly.conf.overlayOpacity,function(){e(this).hide()}),e("#jb-window").hide().click(c),e("#jb-window-inner").centre(),e("#jb-window-content").css({overflow:"hidden"}).hide(),e.history.init(function(t){""===t?r.apply():/^!/.test(t)&&(t=t.substring(1),e("#"+t).trigger("click",[!1]))},{unescape:",/"})}),e.fn.butterfly=function(t){return t=void 0!==t?t:{},t.closeButtonImage&&e('<img src="'+t.closeButtonImage+'" alt="" />'),t.preloadLoadingImage&&e('<img src="'+t.preloadLoadingImage+'" alt="" />'),t.preloadGalleryControlsSprite&&e('<img src="'+t.preloadGalleryControlsSprite+'" alt="" />'),this.each(function(){a.apply(this,[t])})},a=function(t){var n=void 0!==Number.prototype.pxToEm;t=void 0===t?e.butterfly.defaultOptions:e.extend({},e.butterfly.defaultOptions,t),null===t.lightBoxMargin&&(t.lightBoxMargin=n?"2em":"20px"),null===t.contentDefaultWidth&&(t.contentDefaultWidth=n?"50em":"700px"),void 0!==e(this).attr("id")&&""!==e(this).attr("id")||e(this).attr("id",e.butterfly.conf.lightboxClass+"-uid-"+e.butterfly.linkCount),t.linkID=e(this).attr("id"),e.butterfly.linkCount++,e(this).data("options",t),e(this).addClass(e.butterfly.conf.lightboxClass),e(this).click(o)},o=function(t,n){var i,a,o,l,c,d,p,f,g;if(void 0!==t&&t.preventDefault(),n=void 0===n||n)return void e.history.load("!"+e(this).attr("id"));switch(e("#jb-window-inner").css("overflow","hidden"),e("#jb-overlay").is(":visible")?(i=e("#jb-overlay").data("options"),"fragment"===i.linkType&&i.reuseFragment&&e(".jb-placeholder").remove(),a=i.originalTrigger):a=this,l=window.location.href.replace(/#.*$/,""),o=e(this).attr("href"),0===o.indexOf(l)&&(o=o.substring(l.length)),c=e(this).attr("title"),d=e(this).accessibleText(),i=e(this).data("options"),i.href=o,i.title=c,i.linkText=d,i.trigger=this,i.originalTrigger=a,document.getElementById("jb-window-inner").className=i.className||"",i.treatAsImage||h(o)?i.linkType="image":"#"===o.substring(0,1)?i.linkType="fragment":!0===i.useIframe||!1!==i.useIframe&&this.hostname!==window.location.hostname?(i.linkType="iframe",i.useIframe=!0,i.contentDefaultWidth="100%",i.contentDefaultHeight="100%"):i.linkType="ajax",null!==i.callbackPreOpen&&"function"==typeof i.callbackPreOpen&&i.callbackPreOpen.apply(this),i.closeButton?0===e("#jb-close-button").length&&(e("#jb-window").prepend('<a href="#" id="jb-close-button"><img src="'+i.closeButtonImage+'" alt="Close lightbox" /></a>'),e("#jb-close-button").click(r)):e("#jb-close-button").remove(),i.clickOverlayCloses?e("#jb-window").addClass("reactive"):e("#jb-window").removeClass("reactive"),p=e(this),""!==i.galleryContainers&&(i.galleryMode="container"),i.gallerySelector="",i.galleryMode){case"all":i.gallerySelector=e.butterfly.conf.lightboxLinkSelector;break;case"container":e.each(i.galleryContainers.split(","),function(){if(f=this+" "+e.butterfly.conf.lightboxLinkSelector,p.is(f))return i.gallerySelector=f,!1})}""===i.gallerySelector&&""!==e(this).attr("rel")&&(i.gallerySelector=e.butterfly.conf.lightboxLinkSelector+'[rel="'+e(this).attr("rel")+'"]'),g=e("#jb-overlay").data("options")||{},e(this).data("options",i),e("#jb-overlay").data("options",i),e("#jb-window").append('<p id="jb-loading">Loading...</p>'),e("#jb-loading").attr("tabindex","0").focus(),e("#jb-overlay").is(":visible")?("fragment"===g.linkType&&g.reuseFragment&&(e(".jb-placeholder").after(e(g.href)),e(".jb-placeholder").remove(),e(g.href).disableFocussableElements()),e("#jb-window-content").hide().empty(),e("#jb-window").addClass("loading"),s.apply(this,[u])):(e(document.body).disableFocussableElements("#jb-window *"),e("#jb-close-button").hide(),e("#jb-gallery-controls").hide(),e("#jb-overlay").fadeIn(i.animationSpeed).centre(),e("#jb-window").addClass("loading").show(),i.zoomFromClicked?e("#jb-window-inner").css({top:e(this).offset().top,left:e(this).offset().left,width:e(this).width(),height:e(this).height()}):e("#jb-window-inner").css({width:"100px",height:"100px"}).centre(),s.apply(this,[u]))},u=function(){var t=e("#jb-overlay").data("options");e("#jb-window").restoreFocussableElements(),e("#jb-window").removeClass("loading"),setTimeout(function(){switch(e("#jb-window").removeClass("type-media type-image type-fragment type-ajax"),t.linkType){case"image":e("#jb-window").addClass("type-image type-media"),e("#jb-window-inner").css("overflow","hidden");break;case"fragment":e("#jb-window").addClass("type-fragment"),e("#jb-window-inner").css("overflow","auto");break;case"iframe":e("#jb-window").addClass("type-iframe"),e("#jb-window-inner").css("overflow","hidden");break;case"ajax":e("#jb-window").addClass("type-ajax"),e("#jb-window-inner").css("overflow","auto")}t.treatAsMedia&&e("#jb-window").addClass("type-media"),i.apply(this,[function(){var n;"iframe"===t.linkType&&e("#jb-window-content").css("visibility","visible"),e("#jb-window-content").fadeIn(t.animationSpeed,function(){e("#jb-window-content").focus(),e("#jb-loading").remove(),null!==t.callbackPostOpen&&"function"==typeof t.callbackPostOpen&&t.callbackPostOpen.apply(this),n=e("#jb-gallery-next"),t.preloadNextGalleryImage&&n.length>0&&n.is(":visible")&&"#"!==n.attr("href")&&h(n.attr("href"))&&e('<img src="'+n.attr("href")+'" alt="" />')})}])},0)},i=function(t){var n,i,r,a,o,s,l,c,u,d,h,g,b,v,w,y,m,S,x,k,E,j=e("#jb-overlay").data("options");void 0!==j&&(n=parseInt(p(j.lightBoxMargin),10),i=e("#jb-window").width()-2*n,r=e("#jb-window").height()-2*n,a=p(j.contentDefaultWidth,i),o=p(j.contentDefaultHeight,r),s=p(j.mediaMaxWidth,i),l=p(j.mediaMaxHeight,r),null!==j.callbackPreResize&&"function"==typeof j.callbackPreResize&&j.callbackPreResize.apply(e("#jb-window"),[i,r,a,o,s,l]),"image"===j.linkType||j.treatAsMedia?(c=e("#jb-window-content").lightBoxContentWidth(),u=e("#jb-window-content").lightBoxContentHeight(),c>s&&(d=c/s,c=s,u/=d),u>l&&(d=u/l,u=l,c/=d),c>i&&(d=c/i,c=i,u*=d),u>r&&(d=u/r,u=r,c*=d)):"iframe"===j.linkType?(c=a,u=o):(c=e("#jb-window-content").lightBoxContentWidth(),c=""===a||"100%"===a||i<a?i:a,j.collapseHeightWhenPossible?(h=e("#jb-window-inner").width(),e("#jb-window-inner").animate({width:c},0),u=e("#jb-window-content").lightBoxContentHeight(!1),e("#jb-window-inner").width(h),r<u&&(u=r)):(u=e("#jb-window-content").lightBoxContentHeight(),u=""===o||"100%"===o||r<o?r:o)),g=f(c,u),b=j.animateResize?j.animationSpeed:0,e("#jb-close-button").hide(),e("#jb-gallery-controls").hide(),"iframe"===j.linkType&&e("#jb-window-inner iframe").css("visibility","hidden"),e("#jb-window-inner").animate({width:c,height:u,left:g[1],top:g[0]},b,0,function(){if(j=e("#jb-overlay").data("options"),c=e("#jb-window-inner").width(),u=e("#jb-window-inner").height(),"iframe"===j.linkType&&(e("#jb-window-inner iframe").width(c).height(u),e("#jb-window-inner iframe").css("visibility","visible")),e("#jb-close-button").length>0){switch(v=parseInt(e("#jb-close-button").width(),10),w=parseInt(e("#jb-close-button").height(),10),j.closeButtonCorner){case"tr":y=g[1]+c-v/2,m=g[0]-w/2;break;case"br":y=g[1]+c-v/2,m=g[0]+u-w/2;break;case"bl":y=g[1]-v/2,m=g[0]+u-w/2;break;default:y=g[1]-v/2,m=g[0]-w/2}e("#jb-close-button").css({position:"absolute","z-index":"999999",left:y,top:m}).show()}e("#jb-gallery-controls").is(".active")&&(S=g[0]+u/2-j.galleryControlHeight/2,x=g[1]-j.galleryControlWidth,e("#jb-gallery-prev").css({top:S,left:x}),k=g[0]+u/2-j.galleryControlHeight/2,E=g[1]+c,e("#jb-gallery-next").css({top:k,left:E}),e("#jb-gallery-controls").show()),null!==j.callbackPostResize&&"function"==typeof j.callbackPostResize&&j.callbackPostResize.apply(e("#jb-window"),[i,r,a,o,s,l]),void 0!==t&&void 0!==t.apply&&t.apply()}))},s=function(t){var n,i,r,a,o,s,l,c,u,h,f,b,v=e("#jb-overlay").data("options"),w=v.href;switch(v.captionMode){case"title":n=v.title?"<p class='jb-caption'><span>"+v.title+"</span></p>":"";break;case"text":n=v.linkText?"<p class='jb-caption'><span>"+v.linkText+"</span></p>":"";break;default:n=""}switch(e("#jb-window").removeClass("error-no-content"),i=e(v.gallerySelector),e("#jb-gallery-controls").removeClass("active"),i.length>1&&i.isInSet("#"+v.linkID)?(0===e("#jb-gallery-controls").length?(e("#jb-window").append('<div id="jb-gallery-controls"></div>'),r=e('<a id="jb-gallery-prev" href="#">Previous</a>').click(d),a=e('<a id="jb-gallery-next" href="#">Next</a>').click(d),e("#jb-gallery-controls").append(r).append(a),r.add(a).css({position:"absolute","z-index":"99999",display:"block",overflow:"hidden"})):(r=e("#jb-gallery-prev"),a=e("#jb-gallery-next"),r.add(a).removeClass("disabled").attr("tabindex","0").attr("title","").show()),e("#jb-gallery-controls").hide(),e("#jb-gallery-controls").addClass("active"),o=i.prevInSet("#"+v.linkID),!1===o&&(v.galleryLoops?o=i.lastInSet():(o=e('<a href="#" id=""></a>'),r.addClass("disabled").attr("tabindex","-1").hide())),r.attr("href",o.attr("href")).data("linkID",o.attr("id")).attr("title",e.trim(o.accessibleText())),s=i.nextInSet("#"+v.linkID),!1===s&&(v.galleryLoops?s=i.firstInSet():(s=e('<a href="#" id=""></a>'),a.addClass("disabled").attr("tabindex","-1").hide())),a.attr("href",s.attr("href")).data("linkID",s.attr("id")).attr("title",e.trim(s.accessibleText()))):e("#jb-gallery-controls").hide(),v.linkType){case"fragment":v.reuseFragment?(e(w).after('<span class="jb-placeholder"></span>'),e("#jb-window-content").empty().append(e(w))):e("#jb-window-content").empty().append(e(w).clone(!0)),g.apply(this,[v.linkType,w]),t.apply(this);break;case"image":e("#jb-window-content").empty().append('<img src="'+w+'" alt="" style="max-width: 100%; max-height: 100%; float: left;" />'+n),e("#jb-window-content img").error(function(){g.apply(this,[v.linkType,w,t])}).data("full-width","").data("full-height","").load(t);break;case"iframe":e("#jb-window-content").show().css("visibility","hidden"),e("#jb-window-content").empty().append('<iframe src="'+w+'" title="'+n+'" width="100%" height="1000" />'),e("#jb-window-content").css("visibility","hidden"),l=parseInt(p(v.lightBoxMargin),10),c=e("#jb-window").width()-2*l,u=e("#jb-window").height()-2*l,h=p(v.contentDefaultWidth,c),f=p(v.contentDefaultHeight,u),e("#jb-window-content > iframe").width(h).height(f).error(function(){g.apply(this,[v.linkType,w,t])}).load(t);break;default:e.ajaxSetup({cache:!0}),b=-1!==w.indexOf("#")?w.split("#").join(" #"):w,e("#jb-window-content").empty().load(b,function(){g.apply(this,[v.linkType,w]),t.apply(this)})}},g=function(t,n,i){var r,a=!1;"image"!==t&&0!==e("#jb-window-content").children().length||(a=!0),a&&(r=e("#jb-overlay").data("options"),r.linkType="fragment",r.treatAsMedia=!1,e("#jb-overlay").data("options",r),e("#jb-window").removeClass("type-image type-media").addClass("type-fragment error-no-content"),e("#jb-window-content").empty().append("<p>There was an error loading lightbox content. <strong>"+e(r.trigger).text()+"</strong> (<samp>"+n+"</samp>) could not be found.</p>")),void 0!==i&&i.apply(this)},r=function(t){var n,i,r;if(t&&t.preventDefault(),!e("#jb-window:hidden").length){n=e("#jb-overlay").data("options"),i=n.href,null!==n.callbackPreClose&&"function"==typeof n.callbackPreClose&&n.callbackPreClose.apply(n.trigger),"fragment"===n.linkType&&n.reuseFragment&&(e(".jb-placeholder").after(e(i)),e(".jb-placeholder").remove()),e(document.body).restoreFocussableElements(),e("#jb-overlay").fadeOut(n.animationSpeed),e("#jb-window").hide(),e("#jb-window-content").hide(),r=e(n.originalTrigger),void 0===r.attr("tabindex")&&r.attr("tabindex",0),r.focus(),e("#jb-loading").remove(),null!==n.callbackPostClose&&"function"==typeof n.callbackPostClose&&n.callbackPostClose.apply(n.trigger);var a=e(window).scrollTop();e.history.load(""),e(window).scrollTop(a),e(r).focus()}};e.fn.lightBoxContentWidth=function(){var t,n=this.closest("#jb-window"),i=e("#jb-window-inner"),r=!!n.hasClass("type-media"),a=(n.hasClass("media-image"),i.width()),o=i.height(),s=i.css("left"),l=i.css("top");return i.css({width:"auto",height:"auto",left:0,top:0}),"none"===this.css("display")?(this.css("display","block"),t=r?this.find("img").outerWidth(!0):this.outerWidth(!0),this.css("display","none")):t=this.outerWidth(!0),i.css({left:s,top:l}),i.animate({width:a,height:o},0),t},e.fn.lightBoxContentHeight=function(t){var n,i=this.closest("#jb-window"),r=i.find("#jb-window-inner"),a=(i.hasClass("type-media"),i.hasClass("media-image"),r.width()),o=r.height(),s=r.css("left"),l=r.css("top");return t=void 0===t||t,e("#jb-window-inner").height("auto"),t&&e("#jb-window-inner").width("auto").css({left:0,top:0}),"none"===this.css("display")?(this.css("display","block"),n=this.outerHeight(!0),this.css("display","none")):n=e(this).outerHeight(!0),e("#jb-window-inner").width(a).height(o).css({left:s,top:l}),n},c=function(t){var n=e("#jb-overlay").data("options");t.target===e("#jb-window").get(0)&&n.clickOverlayCloses&&r.apply()},l=function(t){if(!e("#jb-overlay").is(":visible")||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)return!0;switch(n(t)){case DOM_VK_UP:case DOM_VK_LEFT:e("#jb-gallery-prev").click();break;case DOM_VK_DOWN:case DOM_VK_RIGHT:e("#jb-gallery-next").click();break;case DOM_VK_HOME:e(e("#jb-overlay").data("options").gallerySelector).firstInSet().click();break;case DOM_VK_END:e(e("#jb-overlay").data("options").gallerySelector).lastInSet().click();break;case DOM_VK_ESCAPE:r.apply();break;default:return!0}t.preventDefault()},d=function(t){var n,i=e(this);if(t.preventDefault(),""!==i.data("linkID"))return e("#jb-gallery-controls").hide(),n=e("#"+i.data("linkID")),n.click()},f=function(t,n){return[(e(window).height()-n)/2,(e(window).width()-t)/2]},e.fn.isInSet=function(t){return-1!==this.index(e(t))},e.fn.nextInSet=function(t){var n=this.index(e(t));return this.length>n+1&&this.eq(n+1)},e.fn.prevInSet=function(t){var n=this.index(e(t));return n>0&&this.eq(n-1)},e.fn.firstInSet=function(){return this.length>0&&this.eq(0)},e.fn.lastInSet=function(){return this.length>0&&this.eq(-1)},h=function(e){if(void 0===e||""===e)return!1;var t=String(e).lastIndexOf(".");return-1!==t&&/^\.(jpg|png|gif|bmp|jpeg)$/i.test(e.substring(t))},e.fn.disableFocussableElements=function(t){t=t||"",this.find("a, input, button, area, frame, iframe, [tabindex]").not(t).not('*[tabindex="-1"]').each(function(){var t=e(this),n=t.attr("tabindex");n=void 0===n||""===n?"":n,t.data("prevTabIndex",n).addClass("jb-unfocussed").attr("tabindex","-1")})},e.fn.restoreFocussableElements=function(){this.find(".jb-unfocussed").each(function(){var t=e(this),n=t.data("prevTabIndex");switch(n){case"":t.removeAttr("tabindex");break;default:t.attr("tabindex",n)}t.removeClass("jb-unfocussed")})},p=function(t,n){return n=void 0!==n?n:e(document.body).width(),t=t.replace("px","").replace(/^\s+|\s+$/g,""),isNaN(t)?"%"===t.substr(t.length-1)?void 0!==n?(t=parseInt(t.substr(0,t.length-1).replace(/^\s+|\s+$/g,""),10))/100*parseInt(n,10):(e.debug("Warning: percentage unit was supplied to parsePixels() but could not be calculated because centDimension was not supplied."),parseInt(t,10)):"em"===t.substr(t.length-2)?void 0!==Number.prototype.pxToEm?(t=parseInt(t.substr(0,t.length-2).replace(/^\s+|\s+$/g,""),10),t=t.pxToEm({reverse:!0}),t.substr(0,t.length-2)):(e.debug("Warning: em unit was supplied to parsePixels() but could not be calulated because pxToEm plugin was not found."),parseInt(t,10)):(e.debug("Warning: unknown unit was supplied. parsePixels() can support px, em or % units only."),parseInt(t,10)):parseInt(t,10)}}(jQuery,ResizeEvents),function(e){function t(t){function i(t){var n=new RegExp(e.map(t,encodeURIComponent).join("|"),"ig");return function(e){return e.replace(n,decodeURIComponent)}}t=e.extend({unescape:!1},t||{}),n.encoder=function(e){return!0===e?function(e){return e}:"string"==typeof e&&(e=i(e.split("")))||"function"==typeof e?function(t){return e(encodeURIComponent(t))}:encodeURIComponent}(t.unescape)}var n={put:function(e,t){(t||window).location.hash=this.encoder(e)},get:function(t){var n=(t||window).location.hash.replace(/^#/,"");try{return e.browser.mozilla?n:decodeURIComponent(n)}catch(e){return n}},encoder:encodeURIComponent},i={id:"__jQuery_history",init:function(){var t='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';return e("body").prepend(t),this},_document:function(){return e("#"+this.id)[0].contentWindow.document},put:function(e){var t=this._document();t.open(),t.close(),n.put(e,t)},get:function(){return n.get(this._document())}},r={};r.base={callback:void 0,type:void 0,check:function(){},load:function(e){},init:function(e,n){t(n),a.callback=e,a._options=n,a._init()},_init:function(){},_options:{}},r.timer={_appState:void 0,_init:function(){var e=n.get();a._appState=e,a.callback(e),setInterval(a.check,100)},check:function(){var e=n.get();e!=a._appState&&(a._appState=e,a.callback(e))},load:function(e){e!=a._appState&&(n.put(e),a._appState=e,a.callback(e))}},r.iframeTimer={_appState:void 0,_init:function(){var e=n.get();a._appState=e,i.init().put(e),a.callback(e),setInterval(a.check,100)},check:function(){var e=i.get(),t=n.get();t!=e&&(t==a._appState?(a._appState=e,n.put(e),a.callback(e)):(a._appState=t,i.put(t),a.callback(t)))},load:function(e){e!=a._appState&&(n.put(e),i.put(e),a._appState=e,a.callback(e))}},r.hashchangeEvent={_init:function(){a.callback(n.get()),e(window).bind("hashchange",a.check)},check:function(){a.callback(n.get())},load:function(e){n.put(e)}};var a=e.extend({},r.base);"onhashchange"in window?a.type="hashchangeEvent":a.type="timer",e.extend(a,r[a.type]),e.history=a}(jQuery),Number.prototype.pxToEm=String.prototype.pxToEm=function(e){e=jQuery.extend({scope:"body",reverse:!1},e);var t,n=""==this?0:parseFloat(this),i=function(){var e=document.documentElement;return self.innerWidth||e&&e.clientWidth||document.body.clientWidth};if("body"==e.scope&&jQuery.browser.msie&&(parseFloat(jQuery("body").css("font-size"))/i()).toFixed(1)>0){t=function(){return 16*(parseFloat(jQuery("body").css("font-size"))/i()).toFixed(3)}()}else t=parseFloat(jQuery(e.scope).css("font-size"));return 1==e.reverse?(n*t).toFixed(2)+"px":(n/t).toFixed(2)+"em"};var ResizeEvents={baseTextHeight:null,currentTextHeight:null,baseWindowWidth:null,baseWindowHeight:null,currentWindowWidth:null,currentWindowHeight:null,initialised:!1,intervalReference:null,textSizeTestElement:null,eventElement:jQuery(document),conf:{textResizeEvent:"x-text-resize",windowResizeEvent:"x-window-resize",windowWidthResizeEvent:"x-window-width-resize",windowHeightResizeEvent:"x-window-height-resize",initialResizeEvent:"x-initial-sizes",pollFrequency:500,textSizeTestElId:"text-resize"}};!function(e){ResizeEvents.bind=function(t,n){e(function(){!0!==ResizeEvents.initialised&&ResizeEvents.initialise()}),ResizeEvents.eventElement.bind(t,n)},ResizeEvents.initialise=function(){!0!==ResizeEvents.initialised&&(ResizeEvents.textSizeTestElement=e('<span id="'+ResizeEvents.conf.textSizeTestElId+'" style="position: absolute; left: -9999px; font-size: 100%; font-family: Courier New, mono; margin: 0; padding: 0;">&nbsp;</span>').get(0),e("body").append(ResizeEvents.textSizeTestElement),windowWidthNow=e(window).width(),windowHeightNow=e(window).height(),textHeightNow=getTextHeight(),ResizeEvents.baseTextHeight=textHeightNow,ResizeEvents.currentTextHeight=textHeightNow,ResizeEvents.baseWindowWidth=windowWidthNow,
ResizeEvents.currentWindowWidth=windowWidthNow,ResizeEvents.baseWindowHeight=windowHeightNow,ResizeEvents.currentWindowHeight=windowHeightNow,null==ResizeEvents.intervalReference&&(ResizeEventsPoll(),ResizeEvents.intervalReference=window.setInterval("ResizeEventsPoll()",ResizeEvents.conf.pollFrequency)),ResizeEvents.eventElement.trigger(ResizeEvents.conf.initialResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),ResizeEvents.initialised=!0)},ResizeEventsPoll=function(){windowWidthNow=e(window).width(),windowHeightNow=e(window).height(),textHeightNow=getTextHeight(),emPixelNow=windowWidthNow/textHeightNow,widthChanged=!1,ResizeEvents.currentWindowWidth!=windowWidthNow&&(ResizeEvents.eventElement.trigger(ResizeEvents.conf.windowWidthResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),ResizeEvents.eventElement.trigger(ResizeEvents.conf.windowResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),ResizeEvents.currentWindowWidth=windowWidthNow,widthChanged=!0),ResizeEvents.currentWindowHeight!=windowHeightNow&&(ResizeEvents.eventElement.trigger(ResizeEvents.conf.windowHeightResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),widthChanged||ResizeEvents.eventElement.trigger(ResizeEvents.conf.windowResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),ResizeEvents.currentWindowHeight=windowHeightNow),ResizeEvents.currentTextHeight!=textHeightNow&&(ResizeEvents.eventElement.trigger(ResizeEvents.conf.textResizeEvent,[emPixelNow,textHeightNow,windowWidthNow,windowHeightNow]),ResizeEvents.currentTextHeight=textHeightNow)},getTextHeight=function(){return ResizeEvents.textSizeTestElement.offsetHeight+""}}(jQuery);